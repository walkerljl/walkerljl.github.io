# 定义
MongoDB复制是将数据同步在多个服务器的过程。

复制提供了数据的冗余备份，并在多个服务器上存储数据副本，提搞了数据的可用性，并可以保证数据的安全性。

复制还允许从硬件故障和服务中断中恢复数据。

# 什么是复制？
- 保障数据的安全性。
- 数据高可用性（24*7）。
- 灾难恢复。
- 无需停机维护（如备份，重建索引，压缩）。
- 分布式读取数据。

# MongoDB复制原理
- MongoDB复制至少需要两个节点。其中一个主节点，负责处理客户端请求，其余的都是从节点，负责复制主节点上的数据。
- MongoDB各个节点常见的搭配方式为：一主一从，一主多从。
- 主节点记录在其上的所有操作oplog，从节点定期轮训主节点获取这些操作，然后对自己的数据副本执行这些操作，从而保证从节点的数据与主节点保持一致。

# 副本集特征
- N个节点的集群
- 任何节点可作为主节点
- 所有写入操作都在主节点上
- 自动故障转移
- 自动恢复

# 副本集设置

# 副本集添加成员
MongoDB只能通过主节点将Mongo服务器添加到副本集中。

MongoDB的副本集与我们常见的主从有所不同，主从在主机宕机后所有服务停止，而副本集在主机宕机后，副本会接管主节点成为主节点，不会出现宕机的情况。